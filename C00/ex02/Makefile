# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: pracksaw <pracksaw@student.42bangkok.co    +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2025/02/21 18:14:54 by pracksaw          #+#    #+#              #
#    Updated: 2025/03/27 19:03:31 by pracksaw         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

#==============================================================================#
## ACCOUNT TESTS MAKEFILE ðŸ“Š
#==============================================================================#

## VARIABLES ðŸ§©
CXX                     =       c++
CXXFLAGS                =       -Wall -Wextra -Werror -std=c++98
NAME                    =       tests

#==============================================================================#
## FILES ðŸ“„
SRC_FILES               =       tests.cpp Account.cpp
HDR_FILES               =       Account.hpp Account.hpp
OBJ_FILES               =       $(SRC_FILES:.cpp=.o)

#==============================================================================#
## PROGRESS TRACKING â±ï¸
TOTAL_FILES             =       $(words $(SRC_FILES))
COMPILED_FILES          =       0
DOTS                    =       $(shell printf ".%.0s" $(shell seq $(TOTAL_FILES)))

#==============================================================================#
## COLORS ðŸŽ¨
GREEN                   =       \033[0;32m
CYAN                    =       \033[0;36m
YELLOW                  =       \033[0;33m
RED                     =       \033[0;31m
PURPLE                  =       \033[0;35m
NC                      =       \033[0m

#==============================================================================#
## RULES ðŸ”¨
all:                            $(NAME)
				@printf "$(GREEN)ðŸŽ‰ Tests have been successfully compiled! ðŸŽ‰$(NC)\n"

$(NAME):                        $(OBJ_FILES)
				@printf "$(YELLOW)ðŸ”— Linking objects into executable...$(NC)\n"
				@$(CXX) $(CXXFLAGS) -o $(NAME) $(OBJ_FILES)
				@printf "$(GREEN)âœ… Executable $(NAME) created! ðŸ§ª$(NC)\n"

account.o: account.cpp account.hpp Account.hpp
				@printf "$(CYAN)ðŸ”„ Compiling: account.cpp$(NC)\n"
				@$(CXX) $(CXXFLAGS) -c account.cpp -o account.o

clean:
				@printf "$(YELLOW)ðŸ§¹ Cleaning object files...$(NC)\n"
				@rm -f $(OBJ_FILES)
				@printf "$(GREEN)âœ¨ Object files cleaned!$(NC)\n"

fclean:                         clean
				@printf "$(YELLOW)ðŸ—‘ï¸  Cleaning $(NAME) executable...$(NC)\n"
				@rm -f $(NAME)
				@printf "$(GREEN)ðŸ§¼ All cleaned up!$(NC)\n"

re:                             fclean all
				@printf "$(PURPLE)ðŸ”„ Project rebuilt from scratch! ðŸ”„$(NC)\n"

#==============================================================================#
## ADDITIONAL HELPERS ðŸ’¡
.PHONY:                         all clean fclean re help

help:
				@printf "$(CYAN)ðŸ“š Available targets:$(NC)\n"
				@printf "$(GREEN)  make$(NC)        - Build the tests program\n"
				@printf "$(GREEN)  make clean$(NC)  - Remove object files\n"
				@printf "$(GREEN)  make fclean$(NC) - Remove object files and executable\n"
				@printf "$(GREEN)  make re$(NC)     - Rebuild from scratch\n"
				@printf "$(GREEN)  make help$(NC)   - Display this help message\n"